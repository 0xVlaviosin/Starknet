#!/bin/bash

sudo apt update
sudo apt install software-properties-common
sudo add-apt-repository ppa:deadsnakes/ppa
sudo apt install python3.9
python3.9 --version
apt install python3.9-dev python3.9-venv
cd pathfinder/py
python3.9 -m venv .venv
cd ~/pathfinder
rustup update
git fetch
git checkout v0.5.0
cargo build --release --bin pathfinder
mv ~/pathfinder/target/release/pathfinder /usr/local/bin/
cd py
source .venv/bin/activate
PIP_REQUIRE_VIRTUALENV=true pip install -e .[dev]
pip install --upgrade pip
systemctl restart starknetd
journalctl -u starknetd -f
